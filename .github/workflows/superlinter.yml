name: Super-Linter
#f49HjrSxzQ42ZXFFcSncC1USMhnSh3WO
on: push

jobs:
    build:
        name: Lint code base
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v3

            - name: Run Super-Linter
              uses: github/super-linter@v4
              env:
                DEFAULT_BRANCH: main
                VALIDATE_ALL_CODEBASE: true
                GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            - name: ZeroTier
              uses: zerotier/github-action@v1.0.1
              with:
                network_id: ${{ secrets.ZEROTIER_NETWORK_ID }}
                auth_token: ${{ secrets.ZEROTIER_CENTRAL_TOKEN }}
 
            - name: ping host
              shell: bash
              run: |
                count=10
                while ! ping -c 1 ${{ secrets.ZEROTIER_HOST_IP }} ; do
                  echo "waiting..." ;
                 sleep 1 ;
                 let count=count-1
                done
                echo "ping success"
